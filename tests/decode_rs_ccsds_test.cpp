#include <cstdio>
extern "C" {
#include <libfec/fec.h>
#include <libfec/fixed.h>
#include <libfec/tables.h>
}
#include <stdio.h>

int main() {
  int i;
  int errors = 16;
  unsigned char data[NN] = {
      0,   100, 200, 45,  145, 245, 90,  190, 35,  135, 235, 80,  180, 25,
      125, 225, 70,  170, 15,  115, 215, 60,  160, 5,   105, 205, 50,  150,
      250, 95,  195, 40,  140, 240, 85,  185, 30,  130, 230, 75,  175, 20,
      120, 220, 65,  165, 10,  110, 210, 55,  155, 0,   100, 200, 45,  145,
      245, 90,  190, 35,  135, 235, 80,  180, 25,  125, 225, 70,  170, 15,
      115, 215, 60,  160, 5,   105, 205, 50,  150, 250, 95,  195, 40,  140,
      240, 85,  185, 30,  130, 230, 75,  175, 20,  120, 220, 65,  165, 10,
      110, 210, 55,  155, 0,   100, 200, 45,  145, 245, 90,  190, 35,  135,
      235, 80,  180, 25,  125, 225, 70,  170, 15,  115, 215, 60,  160, 5,
      105, 205, 50,  150, 250, 95,  195, 40,  140, 240, 85,  185, 30,  130,
      230, 75,  175, 20,  120, 220, 65,  165, 10,  110, 210, 55,  155, 0,
      100, 200, 45,  145, 245, 90,  190, 35,  135, 235, 80,  180, 25,  125,
      225, 70,  170, 15,  115, 215, 60,  160, 5,   105, 205, 50,  150, 250,
      95,  195, 40,  140, 240, 85,  185, 30,  130, 230, 75,  175, 20,  120,
      220, 65,  165, 10,  110, 210, 55,  155, 0,   100, 200, 45,  145, 245,
      90,  190, 35,  135, 235, 80,  180, 25,  125, 225, 70,  170, 15,  90,
      133, 76,  30,  219, 142, 41,  71,  226, 23,  102, 13,  237, 204, 8,
      100, 57,  7,   67,  77,  106, 101, 228, 84,  13,  141, 124, 153, 82,
      84,  248, 200};

  // insert errors.
  for (i = 0; i < errors; i++) {
    data[i] ^= 0xFF;
  }
  decode_rs_ccsds(data);
  printf("Results: ");
  for (i = 0; i < NN; i++) {
    printf("%d, ", (int)data[i]);
  }
  return 0;
}